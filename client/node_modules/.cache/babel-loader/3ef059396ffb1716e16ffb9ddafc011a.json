{"ast":null,"code":"const axios = require('axios'); // const instance = axios.create({\n//   withCredentials: true,\n//   baseURL: \"http://localhost:3200\",\n// })\n// configure({ instance })\n\n\nconst login = async (email, password) => {\n  try {\n    const response = await axios.post('http://localhost:5000/api/user/login', {\n      email,\n      password\n    }, {\n      withCredentials: true\n    });\n    console.log('response', response);\n    return response.data;\n  } catch (e) {\n    console.log('response', e);\n    return e;\n  }\n};\n\nconst signUp = async object => {\n  try {\n    const response = await axios.post('http://localhost:5000/api/user/signup', { ...object\n    }, {\n      withCredentials: true\n    });\n    return response.data;\n  } catch (e) {\n    console.log(e);\n    return e;\n  }\n};\n\nconst getUserConversations = async userId => {\n  const response = await axios.post('http://localhost:5000/api/conversation/get', {\n    userId,\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem(\"CC_Token\")\n    }\n  }, {\n    withCredentials: true,\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem(\"CC_Token\")\n    }\n  });\n  return response.data;\n};\n\nconst getRoomChat = async roomId => {\n  const response = await axios.post('http://localhost:5000/api/conversation/room', {\n    roomId\n  }, {\n    withCredentials: true\n  }); // console.log('response',response)\n\n  if (!response.data.message) {\n    var _response$data;\n\n    const numOfMembers = (_response$data = response.data) === null || _response$data === void 0 ? void 0 : _response$data.participants.length;\n    const viewers = response.data.messages.map(message => {\n      var _message$viewers;\n\n      const newMessage = { ...message,\n        viewers: ((_message$viewers = message.viewers) === null || _message$viewers === void 0 ? void 0 : _message$viewers.length) === numOfMembers\n      };\n      return newMessage;\n    });\n    response.data.messages = viewers;\n    return response.data;\n  }\n\n  return response.data;\n};\n\nconst getUserContacts = async userId => {\n  const response = await axios.post('http://localhost:5000/api/contact', {\n    userId\n  }, {\n    withCredentials: true\n  });\n  return response.data;\n};\n\nconst addToContacts = async (userId, users) => {\n  const response = await axios.post('http://localhost:5000/api/contact/add', {\n    userId,\n    ...users\n  }, {\n    withCredentials: true\n  });\n  return response.data;\n};\n\nconst addConversation = async (name, users, userId) => {\n  const participants = [{\n    name,\n    users,\n    userId\n  }];\n  const response = await axios.post('http://localhost:5000/api/conversation', {\n    name,\n    users,\n    userId\n  }, {\n    withCredentials: true\n  });\n  return response.data;\n};\n\nmodule.exports = {\n  login,\n  signUp,\n  getUserConversations,\n  getUserContacts,\n  addToContacts,\n  getRoomChat,\n  addConversation\n};","map":{"version":3,"sources":["C:/Users/User/Documents/chatapp/client/src/DAL/index.js"],"names":["axios","require","login","email","password","response","post","withCredentials","console","log","data","e","signUp","object","getUserConversations","userId","headers","Authorization","localStorage","getItem","getRoomChat","roomId","message","numOfMembers","participants","length","viewers","messages","map","newMessage","getUserContacts","addToContacts","users","addConversation","name","module","exports"],"mappings":"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","sourcesContent":["\r\nconst axios = require('axios');\r\n\r\n\r\n\r\n// const instance = axios.create({\r\n//   withCredentials: true,\r\n//   baseURL: \"http://localhost:3200\",\r\n// })\r\n\r\n// configure({ instance })\r\n\r\nconst login = async (email, password) => {\r\n    try {\r\n\r\n        const response = await axios.post('http://localhost:5000/api/user/login', { email, password }, { withCredentials: true })\r\n        console.log('response', response)\r\n        return response.data\r\n    } catch (e) {\r\n        console.log('response', e)\r\n        return e\r\n    }\r\n};\r\nconst signUp = async (object) => {\r\n    try {\r\n        const response = await axios.post('http://localhost:5000/api/user/signup', { ...object }, { withCredentials: true })\r\n        return response.data\r\n    } catch (e) {\r\n        console.log(e)\r\n        return e\r\n    }\r\n};\r\nconst getUserConversations = async (userId) => {\r\n\r\n    const response = await axios.post('http://localhost:5000/api/conversation/get', {\r\n        userId, headers: {\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"CC_Token\"),\r\n        },\r\n    }, {\r\n        withCredentials: true, headers: {\r\n            Authorization: \"Bearer \" + localStorage.getItem(\"CC_Token\"),\r\n        },\r\n    })\r\n    return response.data\r\n};\r\nconst getRoomChat = async (roomId) => {\r\n    const response = await axios.post('http://localhost:5000/api/conversation/room', { roomId }, { withCredentials: true })\r\n    // console.log('response',response)\r\n    if (!response.data.message) {\r\n        const numOfMembers = response.data?.participants.length\r\n        const viewers = response.data.messages.map(message => {\r\n            const newMessage = { ...message, viewers: (message.viewers?.length === numOfMembers) }\r\n            return newMessage\r\n        })\r\n        response.data.messages = viewers\r\n\r\n        return response.data\r\n    }\r\n    return response.data\r\n};\r\nconst getUserContacts = async (userId) => {\r\n    const response = await axios.post('http://localhost:5000/api/contact', { userId }, { withCredentials: true })\r\n    return response.data\r\n};\r\nconst addToContacts = async (userId, users) => {\r\n    const response = await axios.post('http://localhost:5000/api/contact/add', { userId, ...users }, { withCredentials: true })\r\n    return response.data\r\n};\r\n\r\n\r\nconst addConversation = async (name, users, userId) => {\r\n    const participants = [{ name, users, userId }]\r\n    const response = await axios.post('http://localhost:5000/api/conversation', { name, users, userId }, { withCredentials: true })\r\n    return response.data\r\n};\r\n\r\nmodule.exports = {\r\n    login, signUp,\r\n    getUserConversations,\r\n    getUserContacts,\r\n    addToContacts, getRoomChat,\r\n    addConversation\r\n}"]},"metadata":{},"sourceType":"module"}
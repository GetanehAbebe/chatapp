{"ast":null,"code":"import axios from 'axios';\n\nconst {\n  SIGNUP_SUCCESS,\n  SIGNUP_FAILURE,\n  SIGNUP_REQUEST,\n  LOGIN_FAILURE,\n  LOGIN_SUCCESS,\n  REQUEST\n} = require('../user/types');\n\nimport { fetchUsersSuccess } from '../contacts/actions';\nexport const login = (email, password) => {\n  return async dispatch => {\n    dispatch(request());\n\n    try {\n      const response = await axios.post('http://localhost:5000/api/user/login', {\n        email,\n        password\n      });\n      console.log('async await', response);\n      dispatch(appentToSorage(response.data));\n      if (response.data.message) throw response.data.message;\n      dispatch(loginSuccess(response.data));\n      dispatch(fetchUsersSuccess);\n    } catch (e) {\n      dispatch(loginFailure(e.message));\n    }\n  };\n};\nexport const signup = object => {\n  console.log('form data', object);\n  return async dispatch => {\n    dispatch(request());\n    axios.post('http://localhost:5000/api/user/signup', object).then(response => {\n      dispatch(signupSuccess(response.data));\n      dispatch(appentToSorage(response.data));\n    }).catch(e => {\n      dispatch(signupFailure(e.message));\n    });\n  };\n};\nexport const request = () => {\n  return {\n    type: REQUEST\n  };\n};\nexport const loginSuccess = users => {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: users\n  };\n};\nexport const loginFailure = error => {\n  return {\n    type: LOGIN_FAILURE,\n    payload: error\n  };\n};\nexport const signupRequest = () => {\n  return {\n    type: REQUEST\n  };\n};\nexport const signupSuccess = users => {\n  return {\n    type: SIGNUP_SUCCESS,\n    payload: users\n  };\n};\nexport const signupFailure = error => {\n  return {\n    type: SIGNUP_FAILURE,\n    payload: error\n  };\n};\nexport const appentToSorage = user => {\n  localStorage.setItem('userId', user._id);\n  localStorage.setItem('userName', user.firstName);\n  localStorage.setItem('token', user.token);\n  console.log('success');\n  return '';\n};","map":{"version":3,"sources":["C:/Users/User/Documents/chatapp/client/src/redux/user/actions.js"],"names":["axios","SIGNUP_SUCCESS","SIGNUP_FAILURE","SIGNUP_REQUEST","LOGIN_FAILURE","LOGIN_SUCCESS","REQUEST","require","fetchUsersSuccess","login","email","password","dispatch","request","response","post","console","log","appentToSorage","data","message","loginSuccess","e","loginFailure","signup","object","then","signupSuccess","catch","signupFailure","type","users","payload","error","signupRequest","user","localStorage","setItem","_id","firstName","token"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nconst { SIGNUP_SUCCESS, SIGNUP_FAILURE,\r\n    SIGNUP_REQUEST, LOGIN_FAILURE, LOGIN_SUCCESS, REQUEST } = require('../user/types')\r\nimport { fetchUsersSuccess } from '../contacts/actions'\r\nexport const login = (email, password) => {\r\n    return async (dispatch) => {\r\n        dispatch(request())\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/user/login', { email, password })\r\n            console.log('async await', response)\r\n            dispatch(appentToSorage(response.data))\r\n            if (response.data.message) throw response.data.message\r\n            dispatch(loginSuccess(response.data))\r\n            dispatch(fetchUsersSuccess)\r\n        } catch (e) {\r\n            dispatch(loginFailure(e.message))\r\n\r\n        }\r\n    }\r\n}\r\nexport const signup = (object) => {\r\n    console.log('form data', object)\r\n    return async (dispatch) => {\r\n        dispatch(request())\r\n        axios.post('http://localhost:5000/api/user/signup', object)\r\n            .then(response => {\r\n                dispatch(signupSuccess(response.data))\r\n                dispatch(appentToSorage(response.data))\r\n            }).catch(e => {\r\n                dispatch(signupFailure(e.message))\r\n            })\r\n    }\r\n}\r\nexport const request = () => {\r\n    return {\r\n        type: REQUEST\r\n    }\r\n}\r\n\r\nexport const loginSuccess = users => {\r\n    return {\r\n        type: LOGIN_SUCCESS,\r\n        payload: users\r\n    }\r\n}\r\n\r\nexport const loginFailure = error => {\r\n    return {\r\n        type: LOGIN_FAILURE,\r\n        payload: error\r\n    }\r\n}\r\n\r\nexport const signupRequest = () => {\r\n    return {\r\n        type: REQUEST\r\n    }\r\n}\r\n\r\nexport const signupSuccess = users => {\r\n    return {\r\n        type: SIGNUP_SUCCESS,\r\n        payload: users\r\n    }\r\n}\r\n\r\nexport const signupFailure = error => {\r\n    return {\r\n        type: SIGNUP_FAILURE,\r\n        payload: error\r\n    }\r\n}\r\n\r\nexport const appentToSorage = user => {\r\n\r\n    localStorage.setItem('userId', user._id)\r\n    localStorage.setItem('userName', user.firstName)\r\n    localStorage.setItem('token', user.token)\r\n    console.log('success')\r\n    return ''\r\n}"]},"metadata":{},"sourceType":"module"}
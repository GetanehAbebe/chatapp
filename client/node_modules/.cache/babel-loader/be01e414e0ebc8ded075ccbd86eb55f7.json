{"ast":null,"code":"import axios from 'axios';\nimport { fetchUsersSuccess } from '../contacts/actions';\n\nconst {\n  SIGNUP_SUCCESS,\n  SIGNUP_FAILURE,\n  SIGNUP_REQUEST,\n  LOGIN_FAILURE,\n  LOGIN_SUCCESS,\n  REQUEST\n} = require('../user/types');\n\nexport const login = (email, password) => {\n  return async dispatch => {\n    dispatch(request());\n\n    try {\n      const response = await axios.post('http://localhost:5000/api/user/login', {\n        email,\n        password\n      });\n      console.log('async await', response);\n      appentToSorage(response.data);\n      if (response.data.message) throw response.data.message;\n      dispatch(loginSuccess(response.data));\n      dispatch(fetchUsersSuccess(response.data.contacts));\n    } catch (e) {\n      dispatch(loginFailure(e.message));\n    }\n  };\n};\nexport const signup = object => {\n  console.log('form data', object);\n  return async dispatch => {\n    dispatch(request());\n    axios.post('http://localhost:5000/api/user/signup', object).then(response => {\n      dispatch(signupSuccess(response.data));\n      appentToSorage(response.data);\n    }).catch(e => {\n      dispatch(signupFailure(e.message));\n    });\n  };\n};\nexport const request = () => {\n  return {\n    type: REQUEST\n  };\n};\nexport const loginSuccess = users => {\n  return {\n    type: LOGIN_SUCCESS,\n    payload: users\n  };\n};\nexport const loginFailure = error => {\n  return {\n    type: LOGIN_FAILURE,\n    payload: error\n  };\n};\nexport const signupRequest = () => {\n  return {\n    type: REQUEST\n  };\n};\nexport const signupSuccess = users => {\n  return {\n    type: SIGNUP_SUCCESS,\n    payload: users\n  };\n};\nexport const signupFailure = error => {\n  return {\n    type: SIGNUP_FAILURE,\n    payload: error\n  };\n};\nexport const appentToSorage = user => {\n  localStorage.setItem('userId', user._id);\n  localStorage.setItem('userName', user.firstName);\n  localStorage.setItem('token', user.token);\n  console.log('success');\n  return '';\n};","map":{"version":3,"sources":["C:/Users/User/Documents/chatapp/client/src/redux/user/actions.js"],"names":["axios","fetchUsersSuccess","SIGNUP_SUCCESS","SIGNUP_FAILURE","SIGNUP_REQUEST","LOGIN_FAILURE","LOGIN_SUCCESS","REQUEST","require","login","email","password","dispatch","request","response","post","console","log","appentToSorage","data","message","loginSuccess","contacts","e","loginFailure","signup","object","then","signupSuccess","catch","signupFailure","type","users","payload","error","signupRequest","user","localStorage","setItem","_id","firstName","token"],"mappings":"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","sourcesContent":["import axios from 'axios'\r\nimport { fetchUsersSuccess } from '../contacts/actions'\r\nconst { SIGNUP_SUCCESS, SIGNUP_FAILURE,\r\n    SIGNUP_REQUEST, LOGIN_FAILURE, LOGIN_SUCCESS, REQUEST } = require('../user/types')\r\nexport const login = (email, password) => {\r\n    return async (dispatch) => {\r\n        dispatch(request())\r\n        try {\r\n            const response = await axios.post('http://localhost:5000/api/user/login', { email, password })\r\n            console.log('async await', response)\r\n            appentToSorage(response.data)\r\n            if (response.data.message) throw response.data.message\r\n            dispatch(loginSuccess(response.data))\r\n            dispatch(fetchUsersSuccess(response.data.contacts))\r\n        } catch (e) {\r\n            dispatch(loginFailure(e.message))\r\n\r\n        }\r\n    }\r\n}\r\nexport const signup = (object) => {\r\n    console.log('form data', object)\r\n    return async (dispatch) => {\r\n        dispatch(request())\r\n        axios.post('http://localhost:5000/api/user/signup', object)\r\n            .then(response => {\r\n                dispatch(signupSuccess(response.data))\r\n                appentToSorage(response.data)\r\n            }).catch(e => {\r\n                dispatch(signupFailure(e.message))\r\n            })\r\n    }\r\n}\r\nexport const request = () => {\r\n    return {\r\n        type: REQUEST\r\n    }\r\n}\r\n\r\nexport const loginSuccess = users => {\r\n    return {\r\n        type: LOGIN_SUCCESS,\r\n        payload: users\r\n    }\r\n}\r\n\r\nexport const loginFailure = error => {\r\n    return {\r\n        type: LOGIN_FAILURE,\r\n        payload: error\r\n    }\r\n}\r\n\r\nexport const signupRequest = () => {\r\n    return {\r\n        type: REQUEST\r\n    }\r\n}\r\n\r\nexport const signupSuccess = users => {\r\n    return {\r\n        type: SIGNUP_SUCCESS,\r\n        payload: users\r\n    }\r\n}\r\n\r\nexport const signupFailure = error => {\r\n    return {\r\n        type: SIGNUP_FAILURE,\r\n        payload: error\r\n    }\r\n}\r\n\r\nexport const appentToSorage = user => {\r\n\r\n    localStorage.setItem('userId', user._id)\r\n    localStorage.setItem('userName', user.firstName)\r\n    localStorage.setItem('token', user.token)\r\n    console.log('success')\r\n    return ''\r\n}"]},"metadata":{},"sourceType":"module"}